{% extends "airflow/master.html" %}

{% block title %}{{ title }}{% endblock %}



{% block body %}
{{ super() }}
<link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css">
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
 <style media="screen" type="text/css">
     td {
      max-width: 230px;
       white-space: nowrap;
       text-overflow: ellipsis;
       overflow: hidden;
       word-break: break-word;
        vertical-align: top;
     }
     td:hover {
        overflow: visible;
        white-space: normal;
        }
     </style>
     
    <div class="row">        
            <h1 class="text-center login-title">TAC</h1>
            <div id="tabs">
  <ul>
    <li id ="ex"><a href="#extractors">extractors</a></li>
    <li id = "lo" ><a href="#loaders">loaders</a></li>
    <li id="tr" ><a href="#transformers">Transformers</a></li>
    <li id="hk" ><a href="#hooks">Hooks</a></li>
    <li id="sn" ><a href="#sensors">Sensors</a></li>
  </ul>
  <div id="extractors">
   
    <table class="table table-striped table-bordered"  id="extractorAccordion">
                <thead></thead>
                <tbody></tbody>
    </table>  
  </div>
  <div id="loaders">
     <table class="table table-striped table-bordered"  id="loaderAccordion">
                <thead></thead>
                <tbody></tbody>
    </table>

  </div>
  <div id="transformers">
   
    <table class="table table-striped table-bordered"  id="transformerAccordion">
                <thead></thead>
                <tbody></tbody>
    </table>
</div> 
  <div id="hooks">
   
    <table class="table table-striped table-bordered"  id="hooksAccordion">
                <thead></thead>
                <tbody></tbody>
    </table>
</div> 
  <div id="sensors">
   
    <table class="table table-striped table-bordered"  id="sensorsAccordion">
                <thead></thead>
                <tbody></tbody>
    </table>
</div>       
    </div>
    </div>
{% endblock %}

{% block tail_js %}
    {{ super() }}
    <script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" charset="utf8" src="{{ url_for('static', filename='data-tables.js') }}"> </script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
    $(document).ready(function(){
        $( "#tabs" ).tabs();
   /// });
  


   //$("#ex,#lo,#tr").on('click',function (){
    
       var data= []
     operator_table_extractor = $("#extractorAccordion").dataTable({
                    "aoColumns": [
                        { "mData": "name", 'sTitle': 'Name', 'sWidth': '10%', 'bSortable': true },
                        { "mData": "type", 'sTitle': 'Type', 'sWidth': '10%', 'bSortable': true },
                        { "mData": "args", 'sTitle': 'arguments', 'sWidth': '20%', 'bSortable': true},
                        { "mData": "desc", 'sTitle': 'description', 'sWidth': '50%', 'bSortable': true},
                        { "mData": "loc", 'sTitle': 'Location', 'sWidth': '10%', 'bSortable': true},
                       
                   ],
                   "sScrollY": "500px",
                   "bPaginate": true,
                    "pageLength": 50

        });
      operator_table_loader = $("#loaderAccordion").dataTable({
                    "aoColumns": [
                        { "mData": "name", 'sTitle': 'Name', 'sWidth': '10%', 'bSortable': true },
                        { "mData": "type", 'sTitle': 'Type', 'sWidth': '10%', 'bSortable': true },
                        { "mData": "args", 'sTitle': 'arguments', 'sWidth': '20%', 'bSortable': true},
                        { "mData": "desc", 'sTitle': 'description', 'sWidth': '50%', 'bSortable': true},
                        { "mData": "loc", 'sTitle': 'Location', 'sWidth': '10%', 'bSortable': true},
                       
                   ],
                   "sScrollY": "500px",
                   "bPaginate": true,
                    "pageLength": 50

        });
       operator_table_transformer = $("#transformerAccordion").dataTable({
                    "aoColumns": [
                        { "mData": "name", 'sTitle': 'Name', 'sWidth': '10%', 'bSortable': true },
                        { "mData": "type", 'sTitle': 'Type', 'sWidth': '10%', 'bSortable': true },
                        { "mData": "args", 'sTitle': 'arguments', 'sWidth': '20%', 'bSortable': true},
                        { "mData": "desc", 'sTitle': 'description', 'sWidth': '50%', 'bSortable': true},
                        { "mData": "loc", 'sTitle': 'Location', 'sWidth': '10%', 'bSortable': true},
                       
                   ],
                   "sScrollY": "500px",
                   "bPaginate": true,
                    "pageLength": 50

        });
       hooks_table = $("#hooksAccordion").dataTable({
                    "aoColumns": [
                        { "mData": "name", 'sTitle': 'Name', 'sWidth': '10%', 'bSortable': true },
                        { "mData": "type", 'sTitle': 'Type', 'sWidth': '10%', 'bSortable': true },
                        { "mData": "args", 'sTitle': 'arguments', 'sWidth': '20%', 'bSortable': true},
                        { "mData": "desc", 'sTitle': 'description', 'sWidth': '50%', 'bSortable': true},
                        { "mData": "loc", 'sTitle': 'Location', 'sWidth': '10%', 'bSortable': true},
                       
                   ],
                   "sScrollY": "500px",
                   "bPaginate": true,
                    "pageLength": 50

        });
       sensors_table = $("#sensorsAccordion").dataTable({
                    "aoColumns": [
                        { "mData": "name", 'sTitle': 'Name', 'sWidth': '10%', 'bSortable': true },
                        { "mData": "type", 'sTitle': 'Type', 'sWidth': '10%', 'bSortable': true },
                        { "mData": "args", 'sTitle': 'arguments', 'sWidth': '20%', 'bSortable': true},
                        { "mData": "desc", 'sTitle': 'description', 'sWidth': '50%', 'bSortable': true},
                        { "mData": "loc", 'sTitle': 'Location', 'sWidth': '10%', 'bSortable': true},
                       
                   ],
                   "sScrollY": "500px",
                   "bPaginate": true,
                    "pageLength": 50

        });


     var data = {{ data_table| tojson|safe }}
     extractors = []
     transformers = []
     loaders = []
     hooks = []
     sensors = []
     for (var imported_file in data){
      console.log(data[imported_file]['type'])
      if (data[imported_file]['module'] == "extractor"){
        extractors.push(data[imported_file]);
      }
      else if (data[imported_file]['module'] == "transformer"){
        transformers.push(data[imported_file]);
     }

      else if (data[imported_file]['module'] == "loader"){
        loaders.push(data[imported_file]);
     }
     else{
      console.log("ERROR while populating table,the file name is not correct kindly refer Documentation with rule name [file Name convention ]")
     }
      if (data[imported_file]['type'] == "hook"){
        console.log("Here")
        hooks.push(data[imported_file]);
     }
     if (data[imported_file]['type'] == "sensor"){
        sensors.push(data[imported_file]);
     }
   }
     
     operator_table_extractor.fnAddData(extractors);
     operator_table_transformer.fnAddData(transformers);
     operator_table_loader.fnAddData(loaders);
     hooks_table.fnAddData(hooks);
     sensors_table.fnAddData(sensors);


   });

  function changeHeadersCss(){
    $("table").css("width","100%")
    $("table").parent().css("width","100%")
  }
  window.onload = changeHeadersCss
  </script>
{% endblock %}

